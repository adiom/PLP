# ``swiftPLP``

**swiftPLP** — это демонстрационный проект, реализованный на языке Swift, который представляет собой простой эмулятор процессора и ассемблер. Он демонстрирует базовые принципы работы с архитектурой процессора, включая управление регистрами, памятью, а также выполнение инструкций и сборку кода из ассемблерного представления в машинный.

## Overview

В проекте реализованы следующие основные компоненты:

1. **Эмулятор процессора (`CPU`)**:  
   Управляет регистрами, памятью и выполняет инструкции. Эмулятор способен загружать программу, пошагово выполнять команды или запускать их непрерывно до остановки.

2. **Ассемблер (`Assembler`)**:  
   Преобразует ассемблерный код в машинный (HEX-код), удобный для загрузки в память эмулятора. Это позволяет быстро протестировать и отладить различные сценарии.

3. **Интерфейс пользователя (`ContentView`)**:  
   Предоставляет графическую форму с помощью SwiftUI, где можно ввести ассемблерный код, преобразовать его в машинный, загрузить в эмулятор и управлять исполнением (шаг за шагом или запуск целиком).

## Topics

### Компоненты эмулятора

- ``CPU``  
  Класс, реализующий эмульрованный процессор. Содержит регистры `A`, `B`, `C`, `FLAGS`, `SP` (указатель стека), `PC` (счётчик команд), а также управляющий 256-байтной памятью.  
  Предоставляет методы:
  - `loadProgram(assembledCode: [UInt8])` — загрузка машинного кода в память.
  - `step()` — выполнение одной инструкции.
  - `run()` — выполнение программы до команды `HALT` или конца памяти.
  - `reset()` — сброс всех регистров и памяти.

- ``Assembler``  
  Класс, реализующий простейший ассемблер для PLP. Преобразует текстовые инструкции в машинный код.  
  Поддерживаемые инструкции включают `LOADA`, `LOADB`, `LOADC`, `PLUS`, `CMP`, `JZ`, `HALT` и другие.  
  Метод:
  - `assemble(program: String) -> [UInt8]` — преобразование ассемблерного кода в массив байт.

### Пользовательский интерфейс

- ``ContentView``  
  SwiftUI-представление, предоставляющее удобный интерфейс для:
  - Ввода ассемблерного кода.
  - Ассемблирования кода в HEX.
  - Загрузки HEX-кода в эмулятор.
  - Просмотра содержимого памяти и состояния регистров.
  - Пошагового или полного запуска программы.
  - Сброса состояния эмулятора.

## Детали реализации

### Регистры и память

- Регистры `A`, `B`, `C` — 8-битные, используются для арифметических операций, хранения промежуточных данных.
- `FLAGS` — 8-битный регистр флагов, например, для указания результата сравнения (равенство).
- `PC` (Program Counter) — 16-битный счётчик команд, указывает на текущую исполняемую инструкцию.
- `SP` (Stack Pointer) — 8-битный указатель стека для операций `PUSH`/`POP`.
- Память представлена массивом `UInt8` на 256 байт, куда загружается исполняемый код и данные.

### Набор инструкций (пример)

- `LOADA XX` — загрузить значение XX (hex) в регистр A.
- `LOADB XX` — загрузить значение XX в регистр B.
- `PLUS` — выполнить сложение A = A + B (результат в A).
- `CMP A,B` — сравнить значения A и B, установить флаги.
- `JZ XX` — если флаг равен "результат ноль", перейти по адресу XX.
- `PUSH A` / `POP A` — работать со стеком, помещая или извлекая значение регистра A.
- `HALT` — остановить выполнение программы.

Таким образом, `swiftPLP` позволяет познакомиться с основами реализации эмулятора процессора, выполнением элементарных инструкций, работой с памятью, регистрами, а также понять принципы преобразования ассемблерного кода в машинный.  
Данный пример даёт базис для экспериментов и дальнейшего расширения функционала, добавления новых инструкций и возможностей.
